(()=>{"use strict";var e=document.querySelector(".profile"),t=e.querySelector(".profile__edit-button"),n=e.querySelector(".profile__add-button"),r=e.querySelector(".profile__update-button"),o={inputSelector:".popup__input",inputErrorClass:"popup__input_type_error",errorSelector:".popup__error",errorClass:"popup__error_active",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled"},i={},u=Array.from(document.forms);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t,n){var r=t.items,o=t.render;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"renderOneItem",value:function(e){this._renderer(e)}},{key:"addItem",value:function(e){this._container.append(e)}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t,n){var r=t.data,o=t.handleCardClick,i=t.handleLikeClick,u=t.handleDeleteButtonClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=r,this._title=this._data.name,this._link=this._data.link,this._likes=this._data.likes.length,this._id=this._data._id,this._ownerId=this._data.owner._id,this._alt=this._title,this._handleCardClick=o,this._handleLikeClick=i,this._handleDeleteButtonClick=u,this._cardSelector=n}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".place").cloneNode(!0)}},{key:"_checkCard",value:function(e){e&&this._deleteButton.remove()}},{key:"_checkLike",value:function(e){e&&this.putLike()}},{key:"generateCard",value:function(e){this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".place__like-button"),this._deleteButton=this._element.querySelector(".place__delete-button"),this._enlargeButton=this._element.querySelector(".place__enlarge-button"),this._cardLikes=this._element.querySelector(".place__like-counter");var t=this._element.querySelector(".place__title"),n=this._element.querySelector(".place__image");return t.textContent=this._title,n.src=this._link,n.alt=this._alt,this._cardLikes.textContent=this._likes,this._setEventListeners(),this._checkCard(e.isNotUserCard),this._checkLike(e.isLikedByUser),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){e._handleLikeClick()})),this._deleteButton&&this._deleteButton.addEventListener("click",(function(){e._handleDeleteButtonClick()})),this._enlargeButton.addEventListener("click",(function(){e._handleCardClick()}))}},{key:"deleteCard",value:function(){this._element.remove(),this._element=null}},{key:"putLike",value:function(){this._likeButton.classList.add("place__like-button_active")}},{key:"deleteLike",value:function(){this._likeButton.classList.remove("place__like-button_active")}},{key:"updateСounter",value:function(e){this._cardLikes.textContent=e}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupSelector=t,this._popup=document.querySelector(this._popupSelector),this._openPopupSelector="popup_opened",this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this._popup.classList.add(this._openPopupSelector)}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._popup.classList.remove(this._openPopupSelector)}},{key:"_handleClickClose",value:function(e){(e.target===e.currentTarget||e.target.classList.contains("popup__close-button"))&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){e._handleClickClose(t)}))}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=y(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},_.apply(this,arguments)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function b(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(r);if(o){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._popupImage=t._popup.querySelector(".popup__image"),t._popupImageCaption=t._popup.querySelector(".popup__image-caption"),t}return t=u,(n=[{key:"open",value:function(e){this._popupImageCaption.textContent=e.name,this._popupImage.src=e.link,this._popupImage.alt=this._popupImageCaption.textContent,_(m(u.prototype),"open",this).call(this)}}])&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(p);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(){return w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=S(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},w.apply(this,arguments)}function S(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}function C(e,t){return C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},C(e,t)}function O(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(r);if(o){var n=L(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._handleSubmitForm=t,n._formElement=n._popup.querySelector(".popup__form"),n._inputList=n._formElement.querySelectorAll(".popup__input"),n._submitButtonElement=n._popup.querySelector(".popup__submit-button"),n}return t=u,(n=[{key:"close",value:function(){w(L(u.prototype),"close",this).call(this),this._formElement.reset()}},{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;w(L(u.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmitForm(e._getInputValues())}))}},{key:"getPopupForm",value:function(){return this._formElement}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"getSubmitButton",value:function(){return this._submitButtonElement}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(p);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=R(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},I.apply(this,arguments)}function R(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}function T(e,t){return T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},T(e,t)}function q(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(r);if(o){var n=x(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return q(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._handleClickSubmit={},t._submitButtonElement=t._popup.querySelector(".popup__submit-button"),t}return t=u,(n=[{key:"setHandler",value:function(e){this._handleClickSubmit=e}},{key:"setEventListeners",value:function(){var e=this;I(x(u.prototype),"setEventListeners",this).call(this),this._submitButtonElement.addEventListener("click",(function(){e._handleClickSubmit()}))}},{key:"getSubmitButton",value:function(){return this._submitButtonElement}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(p);function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var D=function(){function e(t){var n=t.nameSelector,r=t.aboutSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._about=document.querySelector(r),this._avatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent,avatar:this._avatar.src}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._about.textContent=e.about,this._avatar.src=e.avatar}}])&&A(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var N=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._inputErrorClass=t.inputErrorClass,this._errorSelector=t.errorSelector,this._errorClass=t.errorClass,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._isValid(t),e._toggleButtonState()}))}))}},{key:"_isValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._disableButton():this._enableButton()}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_disableButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)}},{key:"_enableButton",value:function(){this._buttonElement.removeAttribute("disabled"),this._buttonElement.classList.remove(this._inactiveButtonClass)}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}}])&&V(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t.baseUrl,this._headers=t.headers}var t,n;return t=e,(n=[{key:"_handleResponse",value:function(e,t){return e.ok?e.json():Promise.reject(t)}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:this._headers}).then((function(t){return e._handleResponse(t,"Данные пользователя не получены")}))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._url,"/cards"),{method:"GET",headers:this._headers}).then((function(t){return e._handleResponse(t,"Список карточек не получен")}))}},{key:"getInitialData",value:function(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}},{key:"editUserInfo",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t._handleResponse(e,"Данные пользователя не изменены")}))}},{key:"addNewCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t._handleResponse(e,"Карточка не добавлена")}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._handleResponse(e,"Карточка не удалена")}))}},{key:"putLike",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((function(e){return t._handleResponse(e,"Лайк не добавлен")}))}},{key:"deleteLike",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((function(e){return t._handleResponse(e,"Лайк не убран")}))}},{key:"updateAvatar",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t._handleResponse(e,"Аватар пользователя не изменен")}))}}])&&H(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var G=new k(".popup_type_enlarge");G.setEventListeners();var M=new U(".popup_type_submit");function z(e){var t=e.getSubmitButton();return{submitButton:t,initialText:t.textContent}}function $(e,t){var n=t.submitButton,r=t.initialText;n.textContent=e?"Сохранение...":r}M.setEventListeners();var K=new D({nameSelector:".profile__name",aboutSelector:".profile__about",avatarSelector:".profile__photo"}),Q=new F({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-41",headers:{authorization:"b6bde9be-8674-4eca-8179-302e0a4e2b6f","Content-Type":"application/json"}});Q.getInitialData().then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];function u(e){return e.likes.some((function(e){return e._id===o._id}))}K.setUserInfo(o);var a=new c({items:i.reverse(),render:function(e){var t=e.owner._id!==o._id,n=u(e),r=function(e){var t=new s({data:e,handleCardClick:function(){G.open(e)},handleLikeClick:function(){function n(n){if(!n)return Promise.reject("Счетчик лайков не обновлен");t.updateСounter(n.likes.length),e.likes=n.likes}u(e)?Q.deleteLike(e._id).then((function(e){return t.deleteLike(),e})).then((function(e){return n(e)})):Q.putLike(e._id).then((function(e){return t.putLike(),e})).then((function(e){return n(e)}))},handleDeleteButtonClick:function(){M.setHandler((function(){Q.deleteCard(e._id).then((function(){t.deleteCard(),M.close()})).catch((function(e){console.log(e)}))})),M.open()}},".place-template");return t}(e).generateCard({isNotUserCard:t,isLikedByUser:n});a.addItem(r)}},".places__list");return a.renderItems(),{userData:o,initialCardsData:i,cardList:a}})).then((function(e){return function(e){u.forEach((function(t){var n=new N(e,t),r=t.getAttribute("name");i[r]=n,n.enableValidation()}))}(o),e})).then((function(e){var n=new j(".popup_type_edit",(function(e){var t=z(n);$(!0,t),Q.editUserInfo(e).then((function(e){K.setUserInfo(e)})).then((function(){n.close()})).catch((function(e){console.log(e)})).finally((function(){$(!1,t)}))}));return n.setEventListeners(),t.addEventListener("click",(function(){n.setInputValues(K.getUserInfo()),i.edit.resetValidation(),n.open()})),e})).then((function(e){var t=new j(".popup_type_add",(function(n){var r=z(t);$(!0,r);var o={name:n.place,link:n.link};Q.addNewCard(o).then((function(t){e.cardList.renderOneItem(t)})).then((function(){t.close()})).catch((function(e){console.log(e)})).finally((function(){$(!1,r)}))}));return t.setEventListeners(),n.addEventListener("click",(function(){i.add.resetValidation(),t.open()})),e})).then((function(e){var t=new j(".popup_type_update-avatar",(function(e){var n=z(t);$(!0,n);var r={avatar:e["avatar-link"]};Q.updateAvatar(r).then((function(e){K.setUserInfo(e)})).then((function(){t.close()})).catch((function(e){console.log(e)})).finally((function(){$(!1,n)}))}));return t.setEventListeners(),r.addEventListener("click",(function(){i["update-avatar"].resetValidation(),t.open()})),e})).catch((function(e){console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQWUsaUJBQWZBLGtCQUNBNk0sRUFBb0I1QixVQUtmYyxLQUdSUixPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUlGLE8iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXgvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZScpO1xyXG5leHBvcnQgY29uc3QgYnV0dG9uRm9yRWRpdGluZ1Byb2ZpbGUgPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xyXG5leHBvcnQgY29uc3QgYnV0dG9uRm9yQWRkaW5nQ2FyZCA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcclxuZXhwb3J0IGNvbnN0IGJ1dHRvbkZvclVwZGF0aW5nQXZhdGFyID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fdXBkYXRlLWJ1dHRvbicpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRzU2VsZWN0b3IgPSAnLnBsYWNlc19fbGlzdCc7XHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgZXJyb3JTZWxlY3RvcjogJy5wb3B1cF9fZXJyb3InLFxyXG4gIGVycm9yQ2xhc3M6ICdwb3B1cF9fZXJyb3JfYWN0aXZlJyxcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fc3VibWl0LWJ1dHRvbicsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19zdWJtaXQtYnV0dG9uX2Rpc2FibGVkJyxcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xyXG5leHBvcnQgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LmZvcm1zKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyT25lSXRlbShpdGVtKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBkYXRhLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZUxpa2VDbGljaywgaGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2sgfSwgY2FyZFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcclxuICAgIHRoaXMuX3RpdGxlID0gdGhpcy5fZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IHRoaXMuX2RhdGEubGluaztcclxuICAgIHRoaXMuX2xpa2VzID0gdGhpcy5fZGF0YS5saWtlcy5sZW5ndGg7XHJcbiAgICB0aGlzLl9pZCA9IHRoaXMuX2RhdGEuX2lkO1xyXG4gICAgdGhpcy5fb3duZXJJZCA9IHRoaXMuX2RhdGEub3duZXIuX2lkO1xyXG5cclxuICAgIHRoaXMuX2FsdCA9IHRoaXMuX3RpdGxlO1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrID0gaGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2s7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLnBsYWNlJylcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tDYXJkKGlzTm90VXNlckNhcmQpIHtcclxuICAgIGlmIChpc05vdFVzZXJDYXJkKSB7XHJcbiAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5yZW1vdmUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9jaGVja0xpa2UoaXNMaWtlZEJ5VXNlcikge1xyXG4gICAgaWYgKGlzTGlrZWRCeVVzZXIpIHtcclxuICAgICAgdGhpcy5wdXRMaWtlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoY2hl0YFrcykge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGxhY2VfX2xpa2UtYnV0dG9uJyk7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZV9fZGVsZXRlLWJ1dHRvbicpO1xyXG4gICAgdGhpcy5fZW5sYXJnZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBsYWNlX19lbmxhcmdlLWJ1dHRvbicpO1xyXG4gICAgdGhpcy5fY2FyZExpa2VzID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGxhY2VfX2xpa2UtY291bnRlcicpO1xyXG5cclxuICAgIGNvbnN0IGNhcmRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBsYWNlX190aXRsZScpO1xyXG4gICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGxhY2VfX2ltYWdlJyk7XHJcblxyXG4gICAgY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XHJcbiAgICBjYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIGNhcmRJbWFnZS5hbHQgPSB0aGlzLl9hbHQ7XHJcblxyXG4gICAgdGhpcy5fY2FyZExpa2VzLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXM7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9jaGVja0NhcmQoY2hl0YFrcy5pc05vdFVzZXJDYXJkKTtcclxuICAgIHRoaXMuX2NoZWNrTGlrZShjaGXRgWtzLmlzTGlrZWRCeVVzZXIpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAodGhpcy5fZGVsZXRlQnV0dG9uKSB7XHJcbiAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b25DbGljaygpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9lbmxhcmdlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIHB1dExpa2UoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3BsYWNlX19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUxpa2UoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3BsYWNlX19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZdChb3VudGVyKGxpa2VzKSB7XHJcbiAgICB0aGlzLl9jYXJkTGlrZXMudGV4dENvbnRlbnQgPSBsaWtlcztcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3I7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3BvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX29wZW5Qb3B1cFNlbGVjdG9yID0gJ3BvcHVwX29wZW5lZCc7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBvcGVuKCkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCh0aGlzLl9vcGVuUG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fb3BlblBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgX2hhbmRsZUNsaWNrQ2xvc2UoZXZlbnQpIHtcbiAgICBpZiAoXG4gICAgICBldmVudC50YXJnZXQgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQgfHxcbiAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1idXR0b24nKVxuICAgICkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDbGlja0Nsb3NlKGV2ZW50KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZUNhcHRpb24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlLWNhcHRpb24nKTtcclxuICB9XHJcblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZUNhcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gdGhpcy5fcG9wdXBJbWFnZUNhcHRpb24udGV4dENvbnRlbnQ7XHJcblxyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0Rm9ybSA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc3VibWl0LWJ1dHRvbicpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZlbnQpID0+IHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlU3VibWl0Rm9ybSh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9wdXBGb3JtKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0U3VibWl0QnV0dG9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3N1Ym1pdEJ1dHRvbkVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUNsaWNrU3VibWl0ID0ge307XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25FbGVtZW50ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19zdWJtaXQtYnV0dG9uJyk7XHJcbiAgfVxyXG5cclxuICBzZXRIYW5kbGVyKGhhbmRsZXIpIHtcclxuICAgIHRoaXMuX2hhbmRsZUNsaWNrU3VibWl0ID0gaGFuZGxlcjtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDbGlja1N1Ym1pdCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRTdWJtaXRCdXR0b24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBhYm91dFNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0U2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IHVzZXJJbmZvUHJvZmlsZSA9IHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgYWJvdXQ6IHRoaXMuX2Fib3V0LnRleHRDb250ZW50LFxyXG4gICAgICBhdmF0YXI6IHRoaXMuX2F2YXRhci5zcmMsXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB1c2VySW5mb1Byb2ZpbGU7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh1c2VyRGF0YSkge1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IHVzZXJEYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IHVzZXJEYXRhLmFib3V0O1xyXG4gICAgdGhpcy5fYXZhdGFyLnNyYyA9IHVzZXJEYXRhLmF2YXRhcjtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yU2VsZWN0b3IgPSBjb25maWcuZXJyb3JTZWxlY3RvcjtcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2lzVmFsaWQoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2lzVmFsaWQoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG5cclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuX3VybCA9IG9wdGlvbnMuYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlUmVzcG9uc2UocmVzLCBlcnJvclRleHQpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3JUZXh0KTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcywgJ9CU0LDQvdC90YvQtSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0L3QtSDQv9C+0LvRg9GH0LXQvdGLJyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMsICfQodC/0LjRgdC+0Log0LrQsNGA0YLQvtGH0LXQuiDQvdC1INC/0L7Qu9GD0YfQtdC9Jyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxEYXRhKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldFVzZXJJbmZvKCksIHRoaXMuZ2V0SW5pdGlhbENhcmRzKCldKTtcclxuICB9XHJcblxyXG4gIGVkaXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzLCAn0JTQsNC90L3Ri9C1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQvdC1INC40LfQvNC10L3QtdC90YsnKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkTmV3Q2FyZChkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMsICfQmtCw0YDRgtC+0YfQutCwINC90LUg0LTQvtCx0LDQstC70LXQvdCwJyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoaWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7aWR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMsICfQmtCw0YDRgtC+0YfQutCwINC90LUg0YPQtNCw0LvQtdC90LAnKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHV0TGlrZShpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcywgJ9Cb0LDQudC6INC90LUg0LTQvtCx0LDQstC70LXQvScpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVMaWtlKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzLCAn0JvQsNC50Log0L3QtSDRg9Cx0YDQsNC9Jyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUF2YXRhcihkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcywgJ9CQ0LLQsNGC0LDRgCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0L3QtSDQuNC30LzQtdC90LXQvScpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xyXG5cclxuaW1wb3J0IHtcclxuICBidXR0b25Gb3JFZGl0aW5nUHJvZmlsZSxcclxuICBidXR0b25Gb3JBZGRpbmdDYXJkLFxyXG4gIGJ1dHRvbkZvclVwZGF0aW5nQXZhdGFyLFxyXG4gIGNhcmRzU2VsZWN0b3IsXHJcbiAgY29uZmlnLFxyXG4gIGZvcm1WYWxpZGF0b3JzLFxyXG4gIGZvcm1MaXN0LFxyXG59IGZyb20gJy4uLy4uL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzJztcclxuXHJcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uLy4uL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzJztcclxuaW1wb3J0IENhcmQgZnJvbSAnLi4vLi4vc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gJy4uLy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMnO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vLi4vc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xyXG5pbXBvcnQgQXBpIGZyb20gJy4uLy4uL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanMnO1xyXG5cclxuLy8gU3luY1xyXG5cclxuLy8gQ3JlYXRlIHBvcHVwIHdpdGggdGhlIGltYWdlXHJcblxyXG5jb25zdCBwb3B1cEVubGFyZ2luZyA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX3R5cGVfZW5sYXJnZScpO1xyXG5wb3B1cEVubGFyZ2luZy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8gQ3JlYXRlIHBvcHVwIHdpdGggdGhlIHN1Ym1pdFxyXG5cclxuY29uc3QgcG9wdXBTdWJtaXRpbmcgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKCcucG9wdXBfdHlwZV9zdWJtaXQnKTtcclxucG9wdXBTdWJtaXRpbmcuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGNoYW5nZSB0aGUgc3VibWl0IGJ1dHRvbiB0ZXh0IHdoZW4gdG8gcmVxdWVzdCB0byB0aGUgc2VydmVyXHJcblxyXG5mdW5jdGlvbiBnZXRTdWJtaXRCdXR0b25Jbml0aWFsVGV4dChwb3B1cCkge1xyXG4gIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHBvcHVwLmdldFN1Ym1pdEJ1dHRvbigpO1xyXG4gIGNvbnN0IGluaXRpYWxUZXh0ID0gc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xyXG5cclxuICByZXR1cm4geyBzdWJtaXRCdXR0b24sIGluaXRpYWxUZXh0IH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoYW5nZVN1Ym1pdEJ1dHRvblRleHQoc3RhcnREb3dubG9hZCwgeyBzdWJtaXRCdXR0b24sIGluaXRpYWxUZXh0IH0pIHtcclxuICBpZiAoc3RhcnREb3dubG9hZCkge1xyXG4gICAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJztcclxuICB9IGVsc2Uge1xyXG4gICAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gaW5pdGlhbFRleHQ7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBDcmVhdGUgdGhlIHVzZXIgaW5mbyBjb250cm9sIG9iamVjdFxyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogJy5wcm9maWxlX19uYW1lJyxcclxuICBhYm91dFNlbGVjdG9yOiAnLnByb2ZpbGVfX2Fib3V0JyxcclxuICBhdmF0YXJTZWxlY3RvcjogJy5wcm9maWxlX19waG90bycsXHJcbn0pO1xyXG5cclxuLy8gQ29uZmlndXJlIEFwaVxyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNDEnLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246ICdiNmJkZTliZS04Njc0LTRlY2EtODE3OS0zMDJlMGE0ZTJiNmYnLFxyXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICB9LFxyXG59KTtcclxuXHJcbi8vIEFzeW5jaFxyXG5cclxuLy8gR2V0IGluaXRpYWwgZGF0YSBmcm9tIHRoZSBzZXJ2ZXJcclxuXHJcbmFwaVxyXG4gIC5nZXRJbml0aWFsRGF0YSgpXHJcbiAgLnRoZW4oKGluaXRpYWxEYXRhKSA9PiB7XHJcbiAgICBjb25zdCBbdXNlckRhdGEsIGluaXRpYWxDYXJkc0RhdGFdID0gaW5pdGlhbERhdGE7XHJcblxyXG4gICAgLy8gU2V0IHVzZXIgaW5mb1xyXG5cclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcclxuXHJcbiAgICAvLyBGdW5jdGlvbiBmb3IgY2hlY2tpbmcgdGhlIGNhcmQgZm9yIGxpa2VzXHJcblxyXG4gICAgZnVuY3Rpb24gY2hlY2tMaWtlQ2FyZChpdGVtKSB7XHJcbiAgICAgIHJldHVybiBpdGVtLmxpa2VzLnNvbWUoKGxpa2UpID0+IGxpa2UuX2lkID09PSB1c2VyRGF0YS5faWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZ1bmN0aW9uIGZvciBjcmVhdGluZyBhIGNhcmRcclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0pIHtcclxuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcclxuICAgICAgICB7XHJcbiAgICAgICAgICBkYXRhOiBpdGVtLFxyXG4gICAgICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHBvcHVwRW5sYXJnaW5nLm9wZW4oaXRlbSk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgaGFuZGxlTGlrZUNsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEZ1bmN0aW9uIGZvciB1cGRhdGluZyBjb3VudGVyIGFmdGVyIGNoYW5naW5nIHRoZSBsaWtlXHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGXQoW91bnRlcihjYXJkRGF0YSkge1xyXG4gICAgICAgICAgICAgIGlmIChjYXJkRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY2FyZEVsZW1lbnQudXBkYXRl0KFvdW50ZXIoY2FyZERhdGEubGlrZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIGl0ZW0ubGlrZXMgPSBjYXJkRGF0YS5saWtlcztcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCfQodGH0LXRgtGH0LjQuiDQu9Cw0LnQutC+0LIg0L3QtSDQvtCx0L3QvtCy0LvQtdC9Jyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBEZWxldGUgYSBsaWtlLCBpZiB0aGVyZSBpcyBvbmUsIG90aGVyd2lzZSBwdXQgdGhlIGxpa2VcclxuXHJcbiAgICAgICAgICAgIGlmIChjaGVja0xpa2VDYXJkKGl0ZW0pKSB7XHJcbiAgICAgICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgICAgICAuZGVsZXRlTGlrZShpdGVtLl9pZClcclxuICAgICAgICAgICAgICAgIC50aGVuKChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBjYXJkRWxlbWVudC5kZWxldGVMaWtlKCk7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBjYXJkRGF0YTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbigoY2FyZERhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZdChb3VudGVyKGNhcmREYXRhKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAgICAgLnB1dExpa2UoaXRlbS5faWQpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoY2FyZERhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgY2FyZEVsZW1lbnQucHV0TGlrZSgpO1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gY2FyZERhdGE7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRl0KFvdW50ZXIocmVzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgaGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgcG9wdXBTdWJtaXRpbmcuc2V0SGFuZGxlcigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgICAgICAuZGVsZXRlQ2FyZChpdGVtLl9pZClcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgY2FyZEVsZW1lbnQuZGVsZXRlQ2FyZCgpO1xyXG4gICAgICAgICAgICAgICAgICBwb3B1cFN1Ym1pdGluZy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcG9wdXBTdWJtaXRpbmcub3BlbigpO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgICcucGxhY2UtdGVtcGxhdGUnXHJcbiAgICAgICk7XHJcblxyXG4gICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVuZGVyIGluaXRpYWwgY2FyZHNcclxuXHJcbiAgICBjb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICB7XHJcbiAgICAgICAgaXRlbXM6IGluaXRpYWxDYXJkc0RhdGEucmV2ZXJzZSgpLFxyXG4gICAgICAgIHJlbmRlcjogKGl0ZW0pID0+IHtcclxuICAgICAgICAgIC8vIGNoZWNrIGEgY2FyZCBvd25lciBhbmQgdXNlcidzIGxpa2VcclxuXHJcbiAgICAgICAgICBjb25zdCBpc05vdFVzZXJDYXJkID0gaXRlbS5vd25lci5faWQgPT09IHVzZXJEYXRhLl9pZCA/IGZhbHNlIDogdHJ1ZTtcclxuICAgICAgICAgIGNvbnN0IGlzTGlrZWRCeVVzZXIgPSBjaGVja0xpa2VDYXJkKGl0ZW0pO1xyXG5cclxuICAgICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChpdGVtKS5nZW5lcmF0ZUNhcmQoeyBpc05vdFVzZXJDYXJkLCBpc0xpa2VkQnlVc2VyIH0pO1xyXG4gICAgICAgICAgY2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgY2FyZHNTZWxlY3RvclxyXG4gICAgKTtcclxuICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XHJcblxyXG4gICAgcmV0dXJuIHsgdXNlckRhdGEsIGluaXRpYWxDYXJkc0RhdGEsIGNhcmRMaXN0IH07XHJcbiAgfSlcclxuXHJcbiAgLnRoZW4oKGRhdGFPYmplY3QpID0+IHtcclxuICAgIC8vIEZ1bmN0aW9uIHRvIHN0YXJ0IHZhbGlkYXRpb25cclxuXHJcbiAgICBmdW5jdGlvbiBlbmFibGVWYWxpZGF0aW9uKGNvbmZpZykge1xyXG4gICAgICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpO1xyXG4gICAgICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKCduYW1lJyk7XHJcblxyXG4gICAgICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuXHJcbiAgICAgICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU3RhcnQgZm9ybSB2YWxpZGF0aW9uXHJcblxyXG4gICAgZW5hYmxlVmFsaWRhdGlvbihjb25maWcpO1xyXG5cclxuICAgIHJldHVybiBkYXRhT2JqZWN0O1xyXG4gIH0pXHJcblxyXG4gIC50aGVuKChkYXRhT2JqZWN0KSA9PiB7XHJcbiAgICAvLyBDcmVhdGUgYSBwb3B1cCBmb3IgZWRpdGluZ1xyXG5cclxuICAgIGNvbnN0IHBvcHVwRWRpdGluZyA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9lZGl0JywgKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgICAgIC8vIE1hbmFnZSBzdWJtaXQgYnV0dG9uIHRleHRcclxuXHJcbiAgICAgIGNvbnN0IGluaXRpYWxUZXh0ID0gZ2V0U3VibWl0QnV0dG9uSW5pdGlhbFRleHQocG9wdXBFZGl0aW5nKTtcclxuICAgICAgY2hhbmdlU3VibWl0QnV0dG9uVGV4dCh0cnVlLCBpbml0aWFsVGV4dCk7XHJcblxyXG4gICAgICAvLyBFZGl0IHVzZXIgaW5mb1xyXG5cclxuICAgICAgYXBpXHJcbiAgICAgICAgLmVkaXRVc2VySW5mbyhpbnB1dFZhbHVlcylcclxuICAgICAgICAudGhlbigodXNlckRhdGEpID0+IHtcclxuICAgICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgIHBvcHVwRWRpdGluZy5jbG9zZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgY2hhbmdlU3VibWl0QnV0dG9uVGV4dChmYWxzZSwgaW5pdGlhbFRleHQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcG9wdXBFZGl0aW5nLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgLy8gQWRkIGxpc3RlbmVycyB0byBvcGVuIHRoZSBwb3B1cCBmb3IgZWRpdGluZ1xyXG5cclxuICAgIGZ1bmN0aW9uIGhhbmRsZUVkaXRCdXR0b24oKSB7XHJcbiAgICAgIHBvcHVwRWRpdGluZy5zZXRJbnB1dFZhbHVlcyh1c2VySW5mby5nZXRVc2VySW5mbygpKTtcclxuICAgICAgZm9ybVZhbGlkYXRvcnNbJ2VkaXQnXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICAgICAgcG9wdXBFZGl0aW5nLm9wZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBidXR0b25Gb3JFZGl0aW5nUHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUVkaXRCdXR0b24pO1xyXG5cclxuICAgIHJldHVybiBkYXRhT2JqZWN0O1xyXG4gIH0pXHJcblxyXG4gIC50aGVuKChkYXRhT2JqZWN0KSA9PiB7XHJcbiAgICAvLyBDcmVhdGUgYSBwb3B1cCBmb3IgYWRkaW5nXHJcblxyXG4gICAgY29uc3QgcG9wdXBBZGRpbmcgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfYWRkJywgKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgICAgIC8vIE1hbmFnZSBzdWJtaXQgYnV0dG9uIHRleHRcclxuXHJcbiAgICAgIGNvbnN0IGluaXRpYWxUZXh0ID0gZ2V0U3VibWl0QnV0dG9uSW5pdGlhbFRleHQocG9wdXBBZGRpbmcpO1xyXG4gICAgICBjaGFuZ2VTdWJtaXRCdXR0b25UZXh0KHRydWUsIGluaXRpYWxUZXh0KTtcclxuXHJcbiAgICAgIC8vIEdldCBkYXRhIGZyb20gcG9wdXAgYWRkaW5nXHJcblxyXG4gICAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgIG5hbWU6IGlucHV0VmFsdWVzLnBsYWNlLFxyXG4gICAgICAgIGxpbms6IGlucHV0VmFsdWVzLmxpbmssXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBBZGQgYSBuZXcgY2FyZFxyXG5cclxuICAgICAgYXBpXHJcbiAgICAgICAgLmFkZE5ld0NhcmQoZGF0YSlcclxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgZGF0YU9iamVjdC5jYXJkTGlzdC5yZW5kZXJPbmVJdGVtKGRhdGEpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgcG9wdXBBZGRpbmcuY2xvc2UoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgIGNoYW5nZVN1Ym1pdEJ1dHRvblRleHQoZmFsc2UsIGluaXRpYWxUZXh0KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHBvcHVwQWRkaW5nLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgLy8gQWRkIGxpc3RlbmVycyB0byBvcGVuIHRoZSBwb3B1cCBmb3IgYWRkaW5nXHJcblxyXG4gICAgZnVuY3Rpb24gaGFuZGxlQnV0dG9uRm9yQWRkaW5nQ2FyZCgpIHtcclxuICAgICAgZm9ybVZhbGlkYXRvcnNbJ2FkZCddLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gICAgICBwb3B1cEFkZGluZy5vcGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYnV0dG9uRm9yQWRkaW5nQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUJ1dHRvbkZvckFkZGluZ0NhcmQpO1xyXG5cclxuICAgIHJldHVybiBkYXRhT2JqZWN0O1xyXG4gIH0pXHJcblxyXG4gIC50aGVuKChkYXRhT2JqZWN0KSA9PiB7XHJcbiAgICAvLyBDcmVhdGUgYSBwb3B1cCB0byB1cGRhdGUgYXZhdGFyXHJcblxyXG4gICAgY29uc3QgcG9wdXBVcGRhdGluZ0F2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV91cGRhdGUtYXZhdGFyJywgKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgICAgIC8vIE1hbmFnZSBzdWJtaXQgYnV0dG9uIHRleHRcclxuXHJcbiAgICAgIGNvbnN0IGluaXRpYWxUZXh0ID0gZ2V0U3VibWl0QnV0dG9uSW5pdGlhbFRleHQocG9wdXBVcGRhdGluZ0F2YXRhcik7XHJcbiAgICAgIGNoYW5nZVN1Ym1pdEJ1dHRvblRleHQodHJ1ZSwgaW5pdGlhbFRleHQpO1xyXG5cclxuICAgICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgICBhdmF0YXI6IGlucHV0VmFsdWVzWydhdmF0YXItbGluayddLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gVXBkYXRlIGF2YXRhclxyXG5cclxuICAgICAgYXBpXHJcbiAgICAgICAgLnVwZGF0ZUF2YXRhcihkYXRhKVxyXG4gICAgICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xyXG4gICAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgcG9wdXBVcGRhdGluZ0F2YXRhci5jbG9zZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgY2hhbmdlU3VibWl0QnV0dG9uVGV4dChmYWxzZSwgaW5pdGlhbFRleHQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcG9wdXBVcGRhdGluZ0F2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIC8vIEFkZCBsaXN0ZW5lcnMgdG8gb3BlbiB0aGUgcG9wdXAgZm9yIGFkZGluZ1xyXG5cclxuICAgIGZ1bmN0aW9uIGhhbmRsZUJ1dHRvbkZvclVwZGF0aW5nQXZhdGFyKCkge1xyXG4gICAgICBmb3JtVmFsaWRhdG9yc1sndXBkYXRlLWF2YXRhciddLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gICAgICBwb3B1cFVwZGF0aW5nQXZhdGFyLm9wZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBidXR0b25Gb3JVcGRhdGluZ0F2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUJ1dHRvbkZvclVwZGF0aW5nQXZhdGFyKTtcclxuXHJcbiAgICByZXR1cm4gZGF0YU9iamVjdDtcclxuICB9KVxyXG5cclxuICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgfSk7XHJcbiJdLCJuYW1lcyI6WyJwcm9maWxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnV0dG9uRm9yRWRpdGluZ1Byb2ZpbGUiLCJidXR0b25Gb3JBZGRpbmdDYXJkIiwiYnV0dG9uRm9yVXBkYXRpbmdBdmF0YXIiLCJjb25maWciLCJpbnB1dFNlbGVjdG9yIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JTZWxlY3RvciIsImVycm9yQ2xhc3MiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJmb3JtVmFsaWRhdG9ycyIsImZvcm1MaXN0IiwiQXJyYXkiLCJmcm9tIiwiZm9ybXMiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlciIsInRoaXMiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZm9yRWFjaCIsIml0ZW0iLCJlbGVtZW50IiwiYXBwZW5kIiwiQ2FyZCIsImNhcmRTZWxlY3RvciIsImRhdGEiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJoYW5kbGVEZWxldGVCdXR0b25DbGljayIsIl9kYXRhIiwiX3RpdGxlIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9saWtlcyIsImxpa2VzIiwibGVuZ3RoIiwiX2lkIiwiX293bmVySWQiLCJvd25lciIsIl9hbHQiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9oYW5kbGVEZWxldGVCdXR0b25DbGljayIsIl9jYXJkU2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiaXNOb3RVc2VyQ2FyZCIsIl9kZWxldGVCdXR0b24iLCJyZW1vdmUiLCJpc0xpa2VkQnlVc2VyIiwicHV0TGlrZSIsImNoZdGBa3MiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9saWtlQnV0dG9uIiwiX2VubGFyZ2VCdXR0b24iLCJfY2FyZExpa2VzIiwiY2FyZFRpdGxlIiwiY2FyZEltYWdlIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2hlY2tDYXJkIiwiX2NoZWNrTGlrZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9vcGVuUG9wdXBTZWxlY3RvciIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJldmVudCIsImtleSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJjb250YWlucyIsIl9oYW5kbGVDbGlja0Nsb3NlIiwiUG9wdXBXaXRoSW1hZ2UiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cEltYWdlQ2FwdGlvbiIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZVN1Ym1pdEZvcm0iLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b25FbGVtZW50IiwicmVzZXQiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsIl9oYW5kbGVDbGlja1N1Ym1pdCIsImhhbmRsZXIiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImFib3V0U2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9uYW1lIiwiX2Fib3V0IiwiX2F2YXRhciIsImFib3V0IiwiYXZhdGFyIiwidXNlckRhdGEiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JTZWxlY3RvciIsIl9lcnJvckNsYXNzIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfYnV0dG9uRWxlbWVudCIsImlucHV0RWxlbWVudCIsIl9pc1ZhbGlkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJfaGFzSW52YWxpZElucHV0IiwiX2Rpc2FibGVCdXR0b24iLCJfZW5hYmxlQnV0dG9uIiwic29tZSIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsIkFwaSIsIm9wdGlvbnMiLCJfdXJsIiwiYmFzZVVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsInJlcyIsImVycm9yVGV4dCIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJfaGFuZGxlUmVzcG9uc2UiLCJhbGwiLCJnZXRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwicG9wdXBFbmxhcmdpbmciLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwU3VibWl0aW5nIiwiZ2V0U3VibWl0QnV0dG9uSW5pdGlhbFRleHQiLCJwb3B1cCIsInN1Ym1pdEJ1dHRvbiIsImdldFN1Ym1pdEJ1dHRvbiIsImluaXRpYWxUZXh0IiwiY2hhbmdlU3VibWl0QnV0dG9uVGV4dCIsInN0YXJ0RG93bmxvYWQiLCJ1c2VySW5mbyIsImFwaSIsImF1dGhvcml6YXRpb24iLCJnZXRJbml0aWFsRGF0YSIsImluaXRpYWxEYXRhIiwiaW5pdGlhbENhcmRzRGF0YSIsImNoZWNrTGlrZUNhcmQiLCJsaWtlIiwic2V0VXNlckluZm8iLCJjYXJkTGlzdCIsInJldmVyc2UiLCJjYXJkRWxlbWVudCIsIm9wZW4iLCJ1cGRhdGXQoW91bnRlciIsImNhcmREYXRhIiwiZGVsZXRlTGlrZSIsInNldEhhbmRsZXIiLCJkZWxldGVDYXJkIiwiY2F0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJjcmVhdGVDYXJkIiwiZ2VuZXJhdGVDYXJkIiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwiZGF0YU9iamVjdCIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIiwiZW5hYmxlVmFsaWRhdGlvbiIsInBvcHVwRWRpdGluZyIsImlucHV0VmFsdWVzIiwiZWRpdFVzZXJJbmZvIiwiZmluYWxseSIsInNldElucHV0VmFsdWVzIiwicG9wdXBBZGRpbmciLCJwbGFjZSIsImFkZE5ld0NhcmQiLCJyZW5kZXJPbmVJdGVtIiwicG9wdXBVcGRhdGluZ0F2YXRhciIsInVwZGF0ZUF2YXRhciJdLCJzb3VyY2VSb290IjoiIn0=